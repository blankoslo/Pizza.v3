New frontend for the Pizzabot, written in Next.js with pages-router.

# Getting Started

In order for the application to work the dev server should be launched through the corresponding docker-container. Read the root-level README, the local dev-url is https://localhost:4000

# About the codebase

## Folder structure

### /pages

Used for defining routes, and check for auth server-side

### /src

The codebase is split into /Landing and /Admin side of the project, with /Shared being code that is shared between them.

/Landing and /Admin is organized into

-   components: Reusable components used in multiple places
-   scenarios: Larger more involved components, which are only used once.
    -   scenearios can contain components, assets etc aswell if they are scoped to that scenario
-   assets: img etc

### /src/api

Helpers for fetching data from backend. useAuthedSWR is useSWR from the SWR-package extended to include the proper credentials/cookies when fetching from protected routes.

## Slack integration and auth

Adding the bot to a workspace and logging in is done through links generated by Slack API. These are requested from our backend, as the Slack Api requires context from our DB in order to get the right credentials. After logging in through this link, the user is redirected to a callback url with an access-token. When logging in with this token a session and corresponding cookie is set up from our backend.
For more info and diagrams, see root README.

**Note** Permissions/access tokens is provided by Slack through Oauth2, but session cookie and csrf-token is managed entirely by the backend.

## Other

### Prettier, Eslint, Husky

The project is set up to use Prettier formatting with basic Eslint linting rules. Run `npm run fix` to format and lint automatically. Husky along with lint-staged package is used to check these rules when commiting, and should automatically install when running `npm install`. Husky scripts are found in /.husky.
